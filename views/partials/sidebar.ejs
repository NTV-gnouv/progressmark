<!-- Sidebar -->
<aside class="sidebar bg-light border-end" id="sidebar">
    <div class="sidebar-header p-3 border-bottom">
        <h6 class="fw-bold mb-0">
            <i class="bi bi-list-ul me-2"></i>
            <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Mục lục' : 'Table of Contents' %>
        </h6>
    </div>
    
    <div class="sidebar-content p-3">
        <nav class="nav flex-column">
            <!-- API Overview -->
            <div class="nav-item mb-3">
                <a class="nav-link sidebar-link" href="#overview">
                    <i class="bi bi-info-circle me-2"></i>
                    <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Tổng quan API' : 'API Overview' %>
                </a>
            </div>

            <!-- Authentication -->
            <div class="nav-item mb-3">
                <a class="nav-link sidebar-link" href="#authentication">
                    <i class="bi bi-shield-lock me-2"></i>
                    <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Xác thực' : 'Authentication' %>
                </a>
                <div class="sidebar-submenu ms-3">
                    <a class="nav-link sidebar-sub-link" href="#auth-register">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Đăng ký' : 'Register' %>
                    </a>
                    <a class="nav-link sidebar-sub-link" href="#auth-login">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Đăng nhập' : 'Login' %>
                    </a>
                    <a class="nav-link sidebar-sub-link" href="#auth-refresh">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Làm mới Token' : 'Refresh Token' %>
                    </a>
                </div>
            </div>

            <!-- Groups -->
            <div class="nav-item mb-3">
                <a class="nav-link sidebar-link" href="#groups">
                    <i class="bi bi-people me-2"></i>
                    <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Quản lý Nhóm' : 'Groups Management' %>
                </a>
                <div class="sidebar-submenu ms-3">
                    <a class="nav-link sidebar-sub-link" href="#groups-list">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Danh sách Nhóm' : 'List Groups' %>
                    </a>
                    <a class="nav-link sidebar-sub-link" href="#groups-create">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Tạo Nhóm' : 'Create Group' %>
                    </a>
                    <a class="nav-link sidebar-sub-link" href="#groups-members">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Thành viên' : 'Members' %>
                    </a>
                </div>
            </div>

            <!-- Tasks -->
            <div class="nav-item mb-3">
                <a class="nav-link sidebar-link" href="#tasks">
                    <i class="bi bi-list-task me-2"></i>
                    <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Quản lý Công việc' : 'Tasks Management' %>
                </a>
                <div class="sidebar-submenu ms-3">
                    <a class="nav-link sidebar-sub-link" href="#tasks-list">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Danh sách Công việc' : 'List Tasks' %>
                    </a>
                    <a class="nav-link sidebar-sub-link" href="#tasks-create">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Tạo Công việc' : 'Create Task' %>
                    </a>
                    <a class="nav-link sidebar-sub-link" href="#tasks-update">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Cập nhật Công việc' : 'Update Task' %>
                    </a>
                </div>
            </div>

            <!-- AI Evaluations -->
            <div class="nav-item mb-3">
                <a class="nav-link sidebar-link" href="#ai-evaluations">
                    <i class="bi bi-robot me-2"></i>
                    <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Đánh giá AI' : 'AI Evaluations' %>
                </a>
                <div class="sidebar-submenu ms-3">
                    <a class="nav-link sidebar-sub-link" href="#ai-manager-eval">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Đánh giá Quản lý' : 'Manager Evaluation' %>
                    </a>
                    <a class="nav-link sidebar-sub-link" href="#ai-auto-eval">
                        <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Đánh giá Tự động' : 'Auto Evaluation' %>
                    </a>
                </div>
            </div>

            <!-- Response Codes -->
            <div class="nav-item mb-3">
                <a class="nav-link sidebar-link" href="#response-codes">
                    <i class="bi bi-code-square me-2"></i>
                    <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Mã Phản hồi' : 'Response Codes' %>
                </a>
            </div>

            <!-- Rate Limiting -->
            <div class="nav-item mb-3">
                <a class="nav-link sidebar-link" href="#rate-limiting">
                    <i class="bi bi-speedometer2 me-2"></i>
                    <%= (typeof lang !== 'undefined' && lang === 'vi') ? 'Giới hạn Tốc độ' : 'Rate Limiting' %>
                </a>
            </div>
        </nav>
    </div>

    <!-- Sidebar Toggle for Mobile -->
    <div class="sidebar-toggle d-lg-none">
        <button class="btn btn-outline-secondary btn-sm" onclick="toggleSidebar()">
            <i class="bi bi-chevron-left" id="sidebarToggleIcon"></i>
        </button>
    </div>
</aside>

<!-- Sidebar Styles -->
<style>
.sidebar {
    position: fixed;
    top: 56px; /* Height of navbar */
    left: 0;
    height: calc(100vh - 56px);
    width: 280px;
    z-index: 1000;
    overflow-y: auto;
    transition: transform 0.3s ease;
}

.sidebar-link {
    color: #6c757d;
    text-decoration: none;
    padding: 0.5rem 0;
    border-radius: 0.375rem;
    transition: all 0.2s ease;
}

.sidebar-link:hover {
    color: #0d6efd;
    background-color: rgba(13, 110, 253, 0.1);
}

.sidebar-link.active {
    color: #0d6efd;
    background-color: rgba(13, 110, 253, 0.1);
    font-weight: 600;
}

.sidebar-submenu {
    display: none;
    margin-top: 0.5rem;
}

.sidebar-submenu.show {
    display: block;
}

.sidebar-sub-link {
    color: #6c757d;
    text-decoration: none;
    padding: 0.25rem 0;
    font-size: 0.9rem;
    border-radius: 0.25rem;
    transition: all 0.2s ease;
}

.sidebar-sub-link:hover {
    color: #0d6efd;
    background-color: rgba(13, 110, 253, 0.05);
}

.sidebar-toggle {
    position: fixed;
    top: 70px;
    left: 10px;
    z-index: 1001;
}

@media (max-width: 991.98px) {
    .sidebar {
        transform: translateX(-100%);
    }
    
    .sidebar.show {
        transform: translateX(0);
    }
    
    .sidebar-toggle {
        display: block;
    }
}

@media (min-width: 992px) {
    .sidebar-toggle {
        display: none;
    }
}
</style>

<!-- Sidebar JavaScript -->
<script>
function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const icon = document.getElementById('sidebarToggleIcon');
    
    sidebar.classList.toggle('show');
    
    if (sidebar.classList.contains('show')) {
        icon.className = 'bi bi-chevron-right';
    } else {
        icon.className = 'bi bi-chevron-left';
    }
}

// Auto-hide sidebar on mobile when clicking outside
document.addEventListener('click', function(event) {
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.querySelector('.sidebar-toggle');
    
    if (window.innerWidth < 992 && 
        !sidebar.contains(event.target) && 
        !sidebarToggle.contains(event.target)) {
        sidebar.classList.remove('show');
        document.getElementById('sidebarToggleIcon').className = 'bi bi-chevron-left';
    }
});

// Smooth scrolling for sidebar links
document.addEventListener('DOMContentLoaded', function() {
    const sidebarLinks = document.querySelectorAll('.sidebar-link[href^="#"]');
    
    sidebarLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);
            
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
                
                // Update active link
                sidebarLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            }
        });
    });
});
</script>
