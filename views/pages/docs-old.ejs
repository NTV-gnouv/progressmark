<%- include('../layouts/main', {
    title: 'API Documentation - ProgressMark',
    description: 'Complete API documentation for ProgressMark - Project Management API with AI Evaluation',
    headerTitle: 'API Documentation',
    headerSubtitle: 'Project Management API with AI Evaluation',
    lang: 'en',
    showHero: true,
    showHeroButtons: true,
    body: `

<!-- API Overview -->
<section id="overview" class="mb-5">
    <div class="card border-0 shadow-sm">
        <div class="card-body p-4">
            <h2 class="card-title mb-4">
                <i class="bi bi-info-circle-fill text-primary me-2"></i>API Overview
            </h2>
            <div class="row g-4">
                <div class="col-md-3">
                    <div class="text-center p-3 bg-light rounded-3">
                        <i class="bi bi-globe text-primary fs-1 mb-3"></i>
                        <h5>Base URL</h5>
                        <code class="text-primary">http://localhost:3000/api/v1</code>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="text-center p-3 bg-light rounded-3">
                        <i class="bi bi-shield-lock text-success fs-1 mb-3"></i>
                        <h5>Authentication</h5>
                        <small class="text-muted">JWT Bearer Token required</small>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="text-center p-3 bg-light rounded-3">
                        <i class="bi bi-file-text text-info fs-1 mb-3"></i>
                        <h5>Content Type</h5>
                        <code class="text-info">application/json</code>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="text-center p-3 bg-light rounded-3">
                        <i class="bi bi-arrow-left-right text-warning fs-1 mb-3"></i>
                        <h5>Response Format</h5>
                        <small class="text-muted">Envelope format with ok, data, error, meta</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Navigation -->
<section id="navigation" class="mb-5">
    <div class="card">
        <div class="card-body p-4">
            <h3 class="card-title mb-4">
                <i class="bi bi-list-ul text-primary me-2"></i>API Sections
            </h3>
            <div class="row g-3">
                <div class="col-md-3">
                    <a href="#authentication" class="btn btn-outline-primary w-100 text-start">
                        <i class="bi bi-key me-2"></i>Authentication
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="#groups" class="btn btn-outline-primary w-100 text-start">
                        <i class="bi bi-people me-2"></i>Groups
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="#tasks" class="btn btn-outline-primary w-100 text-start">
                        <i class="bi bi-check2-square me-2"></i>Tasks
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="#evaluations" class="btn btn-outline-primary w-100 text-start">
                        <i class="bi bi-star me-2"></i>Evaluations
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="#response-codes" class="btn btn-outline-primary w-100 text-start">
                        <i class="bi bi-code-square me-2"></i>Response Codes
                    </a>
                </div>
                <div class="col-md-3">
                    <a href="/docs/architecture" class="btn btn-outline-info w-100 text-start">
                        <i class="bi bi-diagram-3 me-2"></i>System Architecture
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Authentication Section -->
<section id="authentication" class="mb-5">
    <div class="card border-warning">
        <div class="card-header bg-warning text-dark">
            <h3 class="card-title mb-0">
                <i class="bi bi-key-fill me-2"></i>Authentication
            </h3>
        </div>
        <div class="card-body">
            <p class="card-text">Most endpoints require authentication. Include the JWT token in the Authorization header:</p>
            <div class="alert alert-info">
                <code>Authorization: Bearer &lt;your-access-token&gt;</code>
            </div>
            <p class="card-text">Get your access token by logging in via the <code>POST /auth/login</code> endpoint.</p>
        </div>
    </div>
</section>

<!-- Authentication Endpoints -->
<section id="auth-endpoints" class="mb-5">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title mb-0">
                <i class="bi bi-shield-lock me-2"></i>Authentication Endpoints
            </h3>
        </div>
        <div class="card-body">
            <!-- Register Endpoint -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/auth/register</code>
                </div>
                <p class="text-muted mb-3">Register a new user account</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "email": "user@example.com",
  "password": "password123",
  "name": "John Doe"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (201):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "user": {
      "id": "user_id",
      "email": "user@example.com",
      "name": "John Doe",
      "status": "ACTIVE"
    },
    "tokens": {
      "accessToken": "jwt_access_token",
      "refreshToken": "jwt_refresh_token"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Login Endpoint -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/auth/login</code>
                </div>
                <p class="text-muted mb-3">Login with email and password</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "email": "user@example.com",
  "password": "password123"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "user": {
      "id": "user_id",
      "email": "user@example.com",
      "name": "John Doe",
      "status": "ACTIVE"
    },
    "tokens": {
      "accessToken": "jwt_access_token",
      "refreshToken": "jwt_refresh_token"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Refresh Token Endpoint -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/auth/refresh</code>
                </div>
                <p class="text-muted mb-3">Refresh access token using refresh token</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "refreshToken": "jwt_refresh_token"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "tokens": {
      "accessToken": "new_jwt_access_token",
      "refreshToken": "new_jwt_refresh_token"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Forgot Password Endpoint -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/auth/forgot</code>
                </div>
                <p class="text-muted mb-3">Request password reset</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "email": "user@example.com"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "message": "Password reset email sent"
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Reset Password Endpoint -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/auth/reset</code>
                </div>
                <p class="text-muted mb-3">Reset password with token</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "token": "reset_token",
  "newPassword": "new_password123"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "message": "Password reset successfully"
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Logout Endpoint -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/auth/logout</code>
                </div>
                <p class="text-muted mb-3">Logout and revoke refresh token</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "refreshToken": "jwt_refresh_token"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (204):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "message": "Logged out successfully"
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Groups Endpoints -->
<section id="groups" class="mb-5">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title mb-0">
                <i class="bi bi-people me-2"></i>Groups Management
            </h3>
        </div>
        <div class="card-body">
            <!-- Get Groups -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/groups</code>
                </div>
                <p class="text-muted mb-3">Get user's groups</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Headers:</h6>
                        <div class="alert alert-light">
                            <code>Authorization: Bearer &lt;access_token&gt;</code>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-info">Query Parameters:</h6>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Parameter</th>
                                        <th>Type</th>
                                        <th>Required</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>limit</code></td>
                                        <td>integer</td>
                                        <td><span class="badge bg-secondary">No</span></td>
                                        <td>Number of items per page (max 100)</td>
                                    </tr>
                                    <tr>
                                        <td><code>cursor</code></td>
                                        <td>string</td>
                                        <td><span class="badge bg-secondary">No</span></td>
                                        <td>Pagination cursor</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create Group -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/groups</code>
                </div>
                <p class="text-muted mb-3">Create a new group</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "name": "My Team",
  "slug": "my-team",
  "color": "#3B82F6"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (201):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "group": {
      "id": "group_id",
      "name": "My Team",
      "slug": "my-team",
      "color": "#3B82F6",
      "created_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Get Group by ID -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/groups/:gid</code>
                </div>
                <p class="text-muted mb-3">Get group details by ID</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>gid</code> - Group ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "group": {
      "id": "group_id",
      "name": "My Team",
      "slug": "my-team",
      "color": "#3B82F6",
      "created_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Update Group -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-patch me-3">PATCH</span>
                    <code class="endpoint-path flex-grow-1">/groups/:gid</code>
                </div>
                <p class="text-muted mb-3">Update group (Admin only)</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "name": "Updated Team Name",
  "slug": "updated-team",
  "color": "#10B981"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "group": {
      "id": "group_id",
      "name": "Updated Team Name",
      "slug": "updated-team",
      "color": "#10B981",
      "updated_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Delete Group -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-delete me-3">DELETE</span>
                    <code class="endpoint-path flex-grow-1">/groups/:gid</code>
                </div>
                <p class="text-muted mb-3">Delete group (Owner only)</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>gid</code> - Group ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "message": "Group deleted successfully"
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Get Group Members -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/groups/:gid/members</code>
                </div>
                <p class="text-muted mb-3">Get group members</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>gid</code> - Group ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "members": [
      {
        "id": "member_id",
        "user_id": "user_id",
        "role": "ADMIN",
        "joined_at": "2024-01-01T00:00:00Z",
        "user": {
          "id": "user_id",
          "name": "John Doe",
          "email": "john@example.com"
        }
      }
    ]
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Add Group Member -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/groups/:gid/members</code>
                </div>
                <p class="text-muted mb-3">Add member to group (Admin only)</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "user_id": "user_id",
  "role": "MEMBER"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (201):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "member": {
      "id": "member_id",
      "user_id": "user_id",
      "role": "MEMBER",
      "joined_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Update Member Role -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-patch me-3">PATCH</span>
                    <code class="endpoint-path flex-grow-1">/groups/:gid/members/:memberId</code>
                </div>
                <p class="text-muted mb-3">Update member role (Admin only)</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "role": "ADMIN"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "member": {
      "id": "member_id",
      "user_id": "user_id",
      "role": "ADMIN",
      "updated_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Remove Group Member -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-delete me-3">DELETE</span>
                    <code class="endpoint-path flex-grow-1">/groups/:gid/members/:memberId</code>
                </div>
                <p class="text-muted mb-3">Remove member from group (Admin only)</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>gid</code> - Group ID<br>
                            <code>memberId</code> - Member ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "message": "Member removed successfully"
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Tasks Endpoints -->
<section id="tasks" class="mb-5">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title mb-0">
                <i class="bi bi-check2-square me-2"></i>Tasks Management
            </h3>
        </div>
        <div class="card-body">
            <!-- Get Project Tasks -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/projects/:pid/tasks</code>
                </div>
                <p class="text-muted mb-3">Get tasks for a project</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>pid</code> - Project ID
                        </div>
                        <h6 class="text-info mt-3">Query Parameters:</h6>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Parameter</th>
                                        <th>Type</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>status</code></td>
                                        <td>string</td>
                                        <td>Filter by status (todo, in_progress, done, etc.)</td>
                                    </tr>
                                    <tr>
                                        <td><code>assignee</code></td>
                                        <td>string</td>
                                        <td>Filter by assignee user ID</td>
                                    </tr>
                                    <tr>
                                        <td><code>priority</code></td>
                                        <td>string</td>
                                        <td>Filter by priority (low, med, high, urgent)</td>
                                    </tr>
                                    <tr>
                                        <td><code>q</code></td>
                                        <td>string</td>
                                        <td>Search in title and description</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "tasks": [
      {
        "id": "task_id",
        "title": "Task Title",
        "description": "Task description",
        "status": "todo",
        "priority": "high",
        "assignees": ["user_id"],
        "created_at": "2024-01-01T00:00:00Z"
      }
    ]
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Create Task -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/projects/:pid/tasks</code>
                </div>
                <p class="text-muted mb-3">Create a new task</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "title": "Task Title",
  "description": "Task description",
  "priority": "high",
  "status": "todo",
  "due_date": "2024-12-31T23:59:59Z",
  "assignees": ["user_id"]
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (201):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "task": {
      "id": "task_id",
      "title": "Task Title",
      "description": "Task description",
      "priority": "high",
      "status": "todo",
      "due_date": "2024-12-31T23:59:59Z",
      "created_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Get Task by ID -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid</code>
                </div>
                <p class="text-muted mb-3">Get task details by ID</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>tkid</code> - Task ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "task": {
      "id": "task_id",
      "title": "Task Title",
      "description": "Task description",
      "status": "todo",
      "priority": "high",
      "assignees": ["user_id"],
      "created_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Update Task -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-patch me-3">PATCH</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid</code>
                </div>
                <p class="text-muted mb-3">Update task</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "title": "Updated Task Title",
  "description": "Updated description",
  "priority": "urgent",
  "status": "in_progress"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "task": {
      "id": "task_id",
      "title": "Updated Task Title",
      "description": "Updated description",
      "priority": "urgent",
      "status": "in_progress",
      "updated_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Delete Task -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-delete me-3">DELETE</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid</code>
                </div>
                <p class="text-muted mb-3">Delete task</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>tkid</code> - Task ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "message": "Task deleted successfully"
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Add Assignee -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/assignees</code>
                </div>
                <p class="text-muted mb-3">Add assignee to task</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "user_id": "user_id"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (201):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "message": "Assignee added successfully"
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Remove Assignee -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-delete me-3">DELETE</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/assignees/:user_id</code>
                </div>
                <p class="text-muted mb-3">Remove assignee from task</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>tkid</code> - Task ID<br>
                            <code>user_id</code> - User ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "message": "Assignee removed successfully"
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Change Task Status -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/status</code>
                </div>
                <p class="text-muted mb-3">Change task status with history tracking</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "to_status": "in_progress",
  "note": "Starting work on this task"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "task": {
      "id": "task_id",
      "status": "in_progress",
      "updated_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Get Task Status History -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/status-history</code>
                </div>
                <p class="text-muted mb-3">Get task status change history</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>tkid</code> - Task ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "history": [
      {
        "id": "history_id",
        "from_status": "todo",
        "to_status": "in_progress",
        "note": "Starting work",
        "created_at": "2024-01-01T00:00:00Z",
        "user": {
          "id": "user_id",
          "name": "John Doe"
        }
      }
    ]
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Add Worklog -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/worklogs</code>
                </div>
                <p class="text-muted mb-3">Add worklog entry to task</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "content": "Worked on implementing feature",
  "spent_minutes": 120
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (201):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "worklog": {
      "id": "worklog_id",
      "content": "Worked on implementing feature",
      "spent_minutes": 120,
      "created_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Get Task Worklogs -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/worklogs</code>
                </div>
                <p class="text-muted mb-3">Get task worklogs</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>tkid</code> - Task ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "worklogs": [
      {
        "id": "worklog_id",
        "content": "Worked on implementing feature",
        "spent_minutes": 120,
        "created_at": "2024-01-01T00:00:00Z",
        "user": {
          "id": "user_id",
          "name": "John Doe"
        }
      }
    ]
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Add Comment -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/comments</code>
                </div>
                <p class="text-muted mb-3">Add comment to task</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "content": "This task needs more clarification"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (201):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "comment": {
      "id": "comment_id",
      "content": "This task needs more clarification",
      "created_at": "2024-01-01T00:00:00Z",
      "user": {
        "id": "user_id",
        "name": "John Doe"
      }
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Get Task Comments -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/comments</code>
                </div>
                <p class="text-muted mb-3">Get task comments</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>tkid</code> - Task ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "comments": [
      {
        "id": "comment_id",
        "content": "This task needs more clarification",
        "created_at": "2024-01-01T00:00:00Z",
        "user": {
          "id": "user_id",
          "name": "John Doe"
        }
      }
    ]
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Evaluations Endpoints -->
<section id="evaluations" class="mb-5">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title mb-0">
                <i class="bi bi-star me-2"></i>Evaluations Management
            </h3>
        </div>
        <div class="card-body">
            <!-- Get Task Evaluations -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/evaluations</code>
                </div>
                <p class="text-muted mb-3">Get evaluations for a task</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>tkid</code> - Task ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "evaluations": [
      {
        "id": "eval_id",
        "type": "manager",
        "status": "completed",
        "score_percent": 85,
        "created_at": "2024-01-01T00:00:00Z"
      }
    ]
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Create Manager Evaluation -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/evaluations/manager</code>
                </div>
                <p class="text-muted mb-3">Create manager evaluation</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "score_percent": 85,
  "summary": "Good work overall, needs improvement in documentation"
}</code></pre>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (201):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "evaluation": {
      "id": "eval_id",
      "type": "manager",
      "status": "completed",
      "score_percent": 85,
      "summary": "Good work overall, needs improvement in documentation",
      "created_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Create AI Evaluation -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-post me-3">POST</span>
                    <code class="endpoint-path flex-grow-1">/tasks/:tkid/evaluations/ai</code>
                </div>
                <p class="text-muted mb-3">Create AI evaluation using Gemini 2.5 Flash (Rate limited)</p>
                
                <div class="alert alert-info mb-3">
                    <h6><i class="bi bi-info-circle me-2"></i>AI Evaluation Feature</h6>
                    <p class="mb-2">AI analyzes task requirements and worklogs to evaluate completion progress:</p>
                    <ul class="mb-0">
                        <li><strong>Content Analysis:</strong> Compare task requirements with completed work</li>
                        <li><strong>Quality Assessment:</strong> Review detail and specificity in work reports</li>
                        <li><strong>Progress Check:</strong> Evaluate against timeline and deadlines (if any)</li>
                        <li><strong>Result Format:</strong> Percentage score + concise explanation of scoring reason</li>
                    </ul>
                </div>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Request Body:</h6>
                        <pre class="code-block"><code class="language-json">{
  "context_payload": {
    "deliverables": ["Authentication module", "Unit tests", "Documentation"],
    "notes": "Completed 80% of requirements, missing deployment"
  }
}</code></pre>
                        <h6 class="text-info mt-3">Headers:</h6>
                        <div class="alert alert-light">
                            <code>Idempotency-Key: unique-key-123</code><br>
                            <small class="text-muted">Prevents duplicate evaluations</small>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (201):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "evaluation": {
      "id": "eval_id",
      "type": "ai",
      "status": "pending",
      "created_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                        <h6 class="text-warning mt-3">AI Result (after processing):</h6>
                        <pre class="code-block"><code class="language-json">{
  "scorePercent": 80,
  "summary": "You completed 8 out of 10 required items, detailed reports and on schedule",
  "verdict": "pass"
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Get Evaluation by ID -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/evaluations/:eid</code>
                </div>
                <p class="text-muted mb-3">Get evaluation details by ID</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>eid</code> - Evaluation ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "evaluation": {
      "id": "eval_id",
      "type": "ai",
      "status": "completed",
      "score_percent": 78,
      "summary": "AI evaluation summary",
      "output_json": {
        "scorePercent": 78,
        "verdict": "pass",
        "summary": "Good work",
        "rubric": []
      },
      "created_at": "2024-01-01T00:00:00Z"
    }
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Get Evaluation Runs -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/evaluations/:eid/runs</code>
                </div>
                <p class="text-muted mb-3">Get evaluation run history</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Path Parameters:</h6>
                        <div class="alert alert-light">
                            <code>eid</code> - Evaluation ID
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "runs": [
      {
        "id": "run_id",
        "status": "completed",
        "output_json": {
          "scorePercent": 78,
          "verdict": "pass"
        },
        "created_at": "2024-01-01T00:00:00Z"
      }
    ]
  }
}</code></pre>
                    </div>
                </div>
            </div>

            <!-- Test Gemini Connection -->
            <div class="endpoint-item mb-4 p-3 border rounded-3">
                <div class="d-flex align-items-center mb-3">
                    <span class="method-badge method-get me-3">GET</span>
                    <code class="endpoint-path flex-grow-1">/test/gemini</code>
                </div>
                <p class="text-muted mb-3">Test Gemini AI connection</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-primary">Headers:</h6>
                        <div class="alert alert-light">
                            <code>Authorization: Bearer &lt;access_token&gt;</code>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-success">Response (200):</h6>
                        <pre class="code-block"><code class="language-json">{
  "ok": true,
  "data": {
    "message": "Gemini AI connection successful",
    "response": "Hello! I am Gemini AI and working normally."
  }
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Response Codes -->
<section id="response-codes" class="mb-5">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title mb-0">
                <i class="bi bi-code-square me-2"></i>Response Codes
            </h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <h6 class="text-success">Success Responses:</h6>
                    <div class="list-group list-group-flush">
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                            <span><span class="badge bg-success me-2">200</span>OK</span>
                            <small class="text-muted">Request successful</small>
                        </div>
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                            <span><span class="badge bg-success me-2">201</span>Created</span>
                            <small class="text-muted">Resource created successfully</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <h6 class="text-danger">Error Responses:</h6>
                    <div class="list-group list-group-flush">
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                            <span><span class="badge bg-danger me-2">400</span>Bad Request</span>
                            <small class="text-muted">Invalid request data</small>
                        </div>
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                            <span><span class="badge bg-danger me-2">401</span>Unauthorized</span>
                            <small class="text-muted">Authentication required</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
`
}) %>
